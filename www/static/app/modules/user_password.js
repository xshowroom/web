/*! xshowroom - v1.0.0 - 2016-01-15 */angular.module("xShowroom.user.password",["ngCookies","xShowroom.i18n","xShowroom.directives"]).controller("UserPasswordCtrl",["$scope","$modal","$filter","User",function(a,b,c,d){a.password={},a.checkInfo={validation:{old:!1,"new":!1,confirm:!1},reg:{"new":/^\S{6,100}$/,confirm:/^\S{6,100}$/}},a.updatePassword=function(){a.errorMsgs=[];for(var e in a.checkInfo.validation){var f=a.password[e];f&&""!=f?!a.checkInfo.reg[e]||a.checkInfo.reg[e].test(f)?"new"!=e||a.password.old!==a.password["new"]?"confirm"!=e||a.password["new"]===a.password.confirm?a.checkInfo.validation[e]=!1:(a.errorMsgs.push([e,"NOT_SAME_ERROR"]),a.checkInfo.validation[e]=!0):(a.errorMsgs.push([e,"SAME_ERROR"]),a.checkInfo.validation[e]=!0):(a.errorMsgs.push([e,"PATTERN_ERROR"]),a.checkInfo.validation[e]=!0):(a.errorMsgs.push([e,"EMPTY_ERROR"]),a.checkInfo.validation[e]=!0)}a.errorMsgs.length||d.changePassword({old:a.password.old,"new":a.password["new"]}).success(function(d){"object"!=typeof d||d.status?b({title:c("translate")("modal__title__ERROR"),content:d.msg,show:!0}):(a.errorMsgs=[],b({title:c("translate")("modal__title__SUCCESS"),content:d.msg,show:!0}))})}}]);