/*! xshowroom - v1.0.0 - 2016-01-15 */angular.module("xShowroom.shop",["xShowroom.i18n","xShowroom.directives","xShowroom.services","mgcrea.ngStrap"]).controller("ShopCtrl",["$scope","$timeout","$modal","$filter","Brand",function(a,b,c,d,e){a.hasFilter=function(){return!angular.equals(a.filters,{})},a.filterTimeout=null,a.setFilters=function(c,d){a.filterTimeout&&(b.cancel(a.filterTimeout),a.filterTimeout=null),a.filters[c]=d,a.filterTimeout=b(function(){a.getNewBrands(!0)},500,!0)},a.getNewBrands=function(b){a.brands.offset+=b?-a.brands.offset:a.brands.pageSize;var f=angular.copy(a.filters);f.pageSize=a.brands.pageSize,f.offset=a.brands.offset,f.season&&(f.season=f.season.join(",")),f.country&&(f.country=f.country.join(",")),e.findAll(f).success(function(e){if("object"!=typeof e||e.status)return void c({title:d("translate")("modal__title__ERROR"),content:e.msg,show:!0});if(b)a.brands.content=e.data;else for(var f=0,g=e.data.length;g>f;f++)a.brands.content.push(e.data[f]);a.hasNext=e.data.length==a.brands.pageSize})};var f=function(){a.brands={pageSize:16,offset:0,content:null},a.filters={},a.conditions=e.getShopConditions(),a.getNewBrands(!0)};f()}]);