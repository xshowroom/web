/*! xshowroom - v1.0.0 - 2016-01-15 */angular.module("xShowroom.buyer.brand",["xShowroom.i18n","xShowroom.directives","xShowroom.services","mgcrea.ngStrap"]).controller("BuyerBrandCtrl",["$scope","$modal","$timeout","$filter","Brand","Buyer",function(a,b,c,d,e,f){a.hasFilter=function(){return!angular.equals(a.filters,{})},a.filterTimeout=null,a.setFilters=function(b,d){a.filterTimeout&&(c.cancel(a.filterTimeout),a.filterTimeout=null),a.filters[b]=d,a.filterTimeout=c(function(){a.getNewBrands(!0)},500,!0)},a.getNewBrands=function(c){a.brands.offset+=c?-a.brands.offset:a.brands.pageSize;var e=angular.copy(a.filters);e.pageSize=a.brands.pageSize,e.offset=a.brands.offset,e.season&&(e.season=e.season.join(",")),e.country&&(e.country=e.country.join(",")),f.getMyBrandList(e).success(function(e){if("object"!=typeof e||e.status)return void b({title:d("translate")("modal__title__ERROR"),content:e.msg,show:!0});if(c)a.brands.content=e.data;else for(var f=0,g=e.data.length;g>f;f++)a.brands.content.push(e.data[f]);a.hasNext=e.data.length==a.brands.pageSize})};var g=function(){a.brands={pageSize:16,offset:0,content:[]},a.filters={},a.conditions=e.getMyBrandConditions(),a.getNewBrands(!0)};g()}]);