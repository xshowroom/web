/*! xshowroom - v1.0.0 - 2016-01-15 */angular.module("xShowroom.store.create",["xShowroom.i18n","xShowroom.directives","xShowroom.services","mgcrea.ngStrap","ui.uploader","ngTextcomplete"]).controller("StoreCreateCtrl",["$scope","$window","$filter","$modal","Country","Store",function(a,b,c,d,e,f){a.store={shopImage:[]},a.setCollection=function(b){var c=a.store.collectionType?a.store.collectionType.split(","):[],d=c.indexOf(b);d>=0?c.splice(d,1):c.push(b),a.store.collectionType=c.join(",")},a.countries=e.getAll(),a.checkInfo={validation:{shopName:!1,shopType:!1,collectionType:!1,brandList:!1,shopWebsite:!1,shopAddress:!1,shopCountry:!1,shopZipcode:!1,shopShipAddress:!1,shopTel:!1},reg:{shopWebsite:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-@?^=%&amp;/~\+#])?/}},a.addStoreImage=function(b){a.store.shopImage.push(b),a.$apply()},a.create=function(){a.errorMsgs=[];for(var e in a.checkInfo.validation){var g=a.store[e];"shopWebsite"!=e||g?g&&""!=g&&!angular.equals(g,{})?!a.checkInfo.reg[e]||a.checkInfo.reg[e].test(g)?a.checkInfo.validation[e]=!1:(a.errorMsgs.push([e,"PATTERN_ERROR"]),a.checkInfo.validation[e]=!0):(a.errorMsgs.push([e,"EMPTY_ERROR"]),a.checkInfo.validation[e]=!0):a.checkInfo.validation[e]=!1}a.errorMsgs.length||f.create(a.store).success(function(a){a.status?d({title:c("translate")("modal__title__ERROR"),content:a.msg,show:!0}):b.open("/buyer/store","_self")})}}]);